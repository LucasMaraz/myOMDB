{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nexport const useForm = (validates, key) => {\n  _s();\n\n  const history = useHistory();\n  const [values, setValues] = React.useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    password2: \"\"\n  });\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setErrors(validates(values));\n    setIsSubmitting(true);\n  };\n\n  const submitForm = () => {\n    e.preventDefault();\n    key === \"register\" ? axios.post(\"/api/auth/register\", { ...values\n    }).then(res => res.data).then(() => history.push(\"/login\")) : axios.post(\"/api/auth/login\", { ...values\n    }).then(res => res.data).then(() => history.push(\"/home\")).then(() => window.location.reload());\n  };\n\n  return {\n    values,\n    handleSubmit,\n    handleChange,\n    submitForm\n  };\n};\n\n_s(useForm, \"5yw8IGBg58BjjOCW6Y9U801JAfA=\", false, function () {\n  return [useHistory];\n});","map":{"version":3,"sources":["/home/lucas/Escritorio/P5/03Bootcamp/OMDB/src/hooks/useForm.jsx"],"names":["React","axios","useHistory","useForm","validates","key","history","values","setValues","useState","username","email","password","password2","errors","setErrors","isSubmitting","setIsSubmitting","handleChange","e","name","value","target","handleSubmit","preventDefault","submitForm","post","then","res","data","push","window","location","reload"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAO,MAAMC,OAAO,GAAG,CAACC,SAAD,EAAYC,GAAZ,KAAoB;AAAA;;AACzC,QAAMC,OAAO,GAAGJ,UAAU,EAA1B;AACA,QAAM,CAACK,MAAD,EAASC,SAAT,IAAsBR,KAAK,CAACS,QAAN,CAAe;AACzCC,IAAAA,QAAQ,EAAE,EAD+B;AAEzCC,IAAAA,KAAK,EAAE,EAFkC;AAGzCC,IAAAA,QAAQ,EAAE,EAH+B;AAIzCC,IAAAA,SAAS,EAAE;AAJ8B,GAAf,CAA5B;AAMA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBN,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACO,YAAD,EAAeC,eAAf,IAAkCR,QAAQ,CAAC,KAAD,CAAhD;;AAEA,QAAMS,YAAY,GAAIC,CAAD,IAAO;AAC1B,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBF,CAAC,CAACG,MAA1B;AACAd,IAAAA,SAAS,CAAC,EACR,GAAGD,MADK;AAER,OAACa,IAAD,GAAQC;AAFA,KAAD,CAAT;AAID,GAND;;AAQA,QAAME,YAAY,GAAIJ,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAACK,cAAF;AACAT,IAAAA,SAAS,CAACX,SAAS,CAACG,MAAD,CAAV,CAAT;AACAU,IAAAA,eAAe,CAAC,IAAD,CAAf;AACD,GAJD;;AAMA,QAAMQ,UAAU,GAAG,MAAM;AACvBN,IAAAA,CAAC,CAACK,cAAF;AAEAnB,IAAAA,GAAG,KAAK,UAAR,GACIJ,KAAK,CACFyB,IADH,CACQ,oBADR,EAC8B,EAC1B,GAAGnB;AADuB,KAD9B,EAIGoB,IAJH,CAISC,GAAD,IAASA,GAAG,CAACC,IAJrB,EAKGF,IALH,CAKQ,MAAMrB,OAAO,CAACwB,IAAR,CAAa,QAAb,CALd,CADJ,GAOI7B,KAAK,CACFyB,IADH,CACQ,iBADR,EAC2B,EACvB,GAAGnB;AADoB,KAD3B,EAIGoB,IAJH,CAISC,GAAD,IAASA,GAAG,CAACC,IAJrB,EAKGF,IALH,CAKQ,MAAMrB,OAAO,CAACwB,IAAR,CAAa,OAAb,CALd,EAMGH,IANH,CAMQ,MAAMI,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EANd,CAPJ;AAcD,GAjBD;;AAmBA,SAAO;AACL1B,IAAAA,MADK;AAELgB,IAAAA,YAFK;AAGLL,IAAAA,YAHK;AAILO,IAAAA;AAJK,GAAP;AAMD,CAlDM;;GAAMtB,O;UACKD,U","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const useForm = (validates, key) => {\n  const history = useHistory();\n  const [values, setValues] = React.useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    password2: \"\",\n  });\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setValues({\n      ...values,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrors(validates(values));\n    setIsSubmitting(true);\n  };\n\n  const submitForm = () => {\n    e.preventDefault();\n\n    key === \"register\"\n      ? axios\n          .post(\"/api/auth/register\", {\n            ...values,\n          })\n          .then((res) => res.data)\n          .then(() => history.push(\"/login\"))\n      : axios\n          .post(\"/api/auth/login\", {\n            ...values,\n          })\n          .then((res) => res.data)\n          .then(() => history.push(\"/home\"))\n          .then(() => window.location.reload());\n  };\n\n  return {\n    values,\n    handleSubmit,\n    handleChange,\n    submitForm,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}